{{ProjektInfoBox
|name        = Raumstatus
|status      = stable
|image       = Status-maemo-widget.png
|imagesize   = 90
|description = RZL offen?
|author      = [[Benutzer:SEC|sECuRE]]
|username    = 
|version     = 
|update      = 
|platform    = 
|license     = 
|download    = 
}}

Ob der Raum gerade offen ist (sprich ob die Tür geöffnet ist) wird jede Minute ermittelt und im Web zur Verfügung gestellt. Somit sollte niemand vor verschlossener Tür stehen, wenn er Lust hat, spontan ins RaumZeitLabor zu kommen. Der Status kann entweder via Web, IRC oder via Widget auf deinem Mobiltelefon abgerufen werden.

= Funktionsweise =

[[Image:Rzl-status.png|200px|thumb|Funktionsweise]]

Die Scripts in firebox/ holen vom Etherrape den Raumstatus und mithilfe der
Leases-Datei des DHCP-Servers und eines Broadcast-Pings die im Netz
befindlichen Geräte, protokollieren beides jeweils in einer RRD-Datei und
laden anschließend einen [http://status.raumzeitlabor.de/status-1week.png generierten Graphen] sowie [http://status.raumzeitlabor.de/api/full.json full.json] und [http://status.raumzeitlabor.de/api/simple simple.txt]
via WebDAV auf status.raumzeitlabor.de.

== Links ==

=== Für Nutzer ===
* http://status.raumzeitlabor.de/<br>→ Website mit dem aktuellen Status
* http://status.raumzeitlabor.de/status-1week.png<br>→ Graph des Status über die letzte Woche
* Hinter '''raumzeitstatus@jabber.ccc.de''' (Jabber) verbirgt sich ein Bot mit Raumstatus als Away-Status.
* [http://identi.ca/raumzeitstatus raumzeitstatus] auf identi.ca informiert über den Raumstatus
* [http://twitter.com/raumzeitstatus raumzeitstatus] auf twitter informiert über den Raumstatus
* [http://www.oliverknapp.de/RaumZeitStatus.apk Android-Widget]

=== Für Entwickler (API) ===
* http://status.raumzeitlabor.de/api/simple<br>→ Text-API, welche entweder "1", "0" oder "?" enthält
* http://status.raumzeitlabor.de/api/full.json<br>→ JSON-API, welche ein JSON-Dokument enthält

== Quelltext ==
* [http://github.com/raumzeitlabor/raumzeitstatus github: raumzeitstatus]

=== Mobile Devices ===
* [http://github.com/raumzeitlabor/raumzeitstatus-maemo-widget github: raumzeitstatus-maemo-widget] (Nokia N900)
* [http://github.com/raumzeitlabor/raumzeitstatus-android-widget github: raumzeitstatus-android-widget] (Android)

=== Social Networks/Web 2.0 ===
* [http://github.com/raumzeitlabor/raumzeitstatus-identica github: raumzeitstatus-identica] (Identica)
* [http://github.com/raumzeitlabor/raumzeitstatus/tree/master/twitter/ github: raumzeitstatus/twitter] (Twitter)
* [http://github.com/raumzeitlabor/raumzeitstatus-xmpp github: raumzeitstatus-xmpp] (Jabber)

== Setup ==

* RRD-Datenbanken erstellen:
 rrdtool create status-tuer.rrd -s 60 DS:tuer:GAUGE:120:U:U RRA:LAST:0:1:10080
 rrdtool create status-geraete.rrd -s 60 DS:geraete:GAUGE:120:U:U RRA:LAST:0:1:10080
* MySQL-Datenbank einrichten:

 CREATE TABLE leases (
   `ip` varchar(39) NOT NULL,
   `mac` varchar(17) NOT NULL,
   `ipv4_reachable` tinyint(1) NOT NULL,
   `ipv6_reachable` tinyint(1) NOT NULL,
   `hostname` text,
    PRIMARY KEY  (`ip`)
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1

* davconfig.pm und sqlconfig.pm befüllen
* Etherrape anschließen
* raumstatus-meta.sh als Cronjob einrichten
* WebDAV einrichten:

 <Location /update/>
   Dav On
   AuthType Digest
   AuthName "update"
   AuthDigestDomain /update/ http://status.raumzeitlabor.de/update/
   AuthDigestProvider file
   AuthUserFile /data/www/status.raumzeitlabor.de/conf/digest-update
   Require valid-user
 </Location>

* status-unreachable.pl als Cronjob einrichten
== Technische Doku ==

Auf dem Patchpanel ist der Kontakt an Blau-weiß/Blau (aufgelegt auf Pin 4-5) angeschlossen. Die restlichen Adern sind nicht belegt.


== Beteiligte/Danksagungen ==
* [[User:SEC|sECuRE]]
* AlexanderB (Türmodifikation)
* [[User:Silsha|silsha]] (ursprünglicher Code)
* Unicorn (Android-Widget)
* [[User:Rabe|rabe]] (Hosting von raumzeitlabor.de)
* [[User:Scytale|Scytale]] (Zeitweises Hosting)
* [[User:Rami|rami]] (XMPP-Bot)
* Danke an alle Tester/Nutzer!

[[Kategorie:Projekt]]
