{{ProjektInfoBox
|name        = Raumstatus
|status      = stable
|image       =
|description = 
|author      = [[Benutzer:sECuRE|sECuRE]]
|username    = 
|version     = 
|update      = 
|platform    = 
|license     = 
|download    = 
}}

Ob der Raum gerade offen ist (sprich ob die Tür geöffnet ist) wird jede Minute ermittelt und im Web zur Verfügung gestellt. Somit sollte niemand vor verschlossener Tür stehen, wenn er Lust hat, spontan ins RaumZeitLabor zu kommen. Der Status kann entweder via Web, IRC oder via Widget auf deinem Mobiltelefon abgerufen werden.

= Funktionsweise =

[[Image:Rzl-status.png|200px|thumb|Funktionsweise]]

Die Scripts in firebox/ holen vom Etherrape den Raumstatus und mithilfe der
Leases-Datei des DHCP-Servers und eines Broadcast-Pings die im Netz
befindlichen Geräte, protokollieren beides jeweils in einer RRD-Datei und
laden anschließend einen generierten Graphen sowie full.json und simple.txt
via WebDAV auf status.raumzeitlabor.de.

== Links ==

=== Für Nutzer ===
* http://status.raumzeitlabor.de/<br>→ Website mit dem aktuellen Status
* http://status.raumzeitlabor.de/status-1week.png<br>→ Graph des Status über die letzte Woche
* Unter der Jabber-Adresse '''raumzeitstatus@jabber.ccc.de''' verbirgt sich ein Bot, der den Raumstatus repräsentiert.

=== Für Entwickler ===
* http://status.raumzeitlabor.de/api/simple<br>→ Text-API, welche entweder "1", "0" oder "?" enthält
* http://status.raumzeitlabor.de/api/full.json<br>→ JSON-API, welche ein JSON-Dokument enthält
* http://github.com/raumzeitlabor/raumzeitstatus<br>→ Sourcecode (auf GitHub)

=== Mobile Devices ===
* http://github.com/raumzeitlabor/raumzeitlabor-status-widget<br>→ Widget für Maemo (Nokia N900)
* TODO: android widget

=== Social Networks/Web 2.0 ===
* http://github.com/raumzeitlabor/raumzeitstatus-identica<br>→ Identica-Updates
* http://github.com/raumzeitlabor/raumzeitstatus-xmpp<br>→ Jabber-Bot

== Setup ==

* RRD-Datenbanken erstellen:
 rrdtool create status-tuer.rrd -s 60 DS:tuer:GAUGE:120:U:U RRA:LAST:0:1:10080
 rrdtool create status-geraete.rrd -s 60 DS:geraete:GAUGE:120:U:U RRA:LAST:0:1:10080
* MySQL-Datenbank einrichten:

 CREATE TABLE leases (
   `ip` varchar(39) NOT NULL,
   `mac` varchar(17) NOT NULL,
   `ipv4_reachable` tinyint(1) NOT NULL,
   `ipv6_reachable` tinyint(1) NOT NULL,
   `hostname` text,
    PRIMARY KEY  (`ip`)
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1

* davconfig.pm und sqlconfig.pm befüllen
* Etherrape anschließen
* raumstatus-meta.sh als Cronjob einrichten
* WebDAV einrichten:

 <Location /update/>
   Dav On
   AuthType Digest
   AuthName "update"
   AuthDigestDomain /update/ http://status.raumzeitlabor.de/update/
   AuthDigestProvider file
   AuthUserFile /data/www/status.raumzeitlabor.de/conf/digest-update
   Require valid-user
 </Location>

* status-unreachable.pl als Cronjob einrichten

== Beteiligte/Danksagungen ==
* [[User:SEC|sECuRE]]
* AlexanderB (Türmodifikation)
* [[User:Silsha|silsha]] (ursprünglicher Code)
* Unicorn (Android-Widget)
* [[User:Rabe|rabe]] (Hosting von raumzeitlabor.de)
* [[User:Scytale|Scytale]] (Zeitweises Hosting)
* Danke an alle Tester/Nutzer!

[[Kategorie:Projekt]]]
