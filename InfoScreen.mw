{{ProjektInfoBox
|name        = InfoScreen
|status      = beta
|image       = Infoscreen01.jpg
|description = Aktuelle Information über das RaumZeitLabor
|author      = [[Benutzer:Tiefpunkt|tiefpunkt]], [[Benutzer:Blabber|blabber]]
|username    = 
|version     = v0.4
|update      = 
|platform    = 
|preis       = 
|license     = 
|download    = https://github.com/raumzeitlabor/infoscreen
}}

== Beschreibung ==

Der InfoScreen steht auf dem Kühlschrank und zeigt einige interessante Informationen an. Aktuell sind das:
* Aktueller Stromverbrauch + Graph des Verbrauchs über die letzten 60 Minuten
* Anzahl Geräte im Netzwerk
* Temperatur
* Mitgliederanzahl
* Kontostand
* RaumStatus
* Fahrplan der Bahnhaltestelle Boveristraße
* Twitterwall
* Bilder aus [http://log.raumzeitlabor.de log.raumzeitlabor.de]

== Technik ==

Auf einem Raspberry Pi läuft ein Raspbian, dass beim Hochfahren einen Chromium im Kioskmodus öffnet und auf http://cosm.tiefpunkt.com/infoscreen/ navigiert. Da läuft der Infoscreen, eine Mischung aus PHP, HTML und JS, die aus Daten von Cosm, der VRN und Twitter eine kleine Seite produziert, die alle 30 Sekunden aktualisiert wird.

== Konfiguration ==

=== Software ===

  sudo apt-get install chromium x11-xserver-utils unclutter lighttpd php5-cgi git

  sudo nano /etc/lighttpd/lighttpd.conf

Folgende Zeile im Abschnitt server.modules hinzufügen:

  "mod_fastcgi",

Folgende Zeilen ans Ende der Datei einfügen:

  fastcgi.server = ( ".php" => (( 
                    "bin-path" => "/usr/bin/php-cgi",
                    "socket" => "/tmp/php.sock" 
                )))

Und die Zeile

  server.document-root        = "/var/www"

durch 

  server.document-root        = "/var/www/infoscreen"

ersetzen.

=== Installation der Infoscreen Software ===
Folgende Zeilen ausführen:

  sudo -u www-data -i git clone https://github.com/raumzeitlabor/infoscreen.git /var/www/infoscreen
  sudo -u www-data -i cd /var/www/infoscreen && git submodule update --init --recursive


=== Update Repository bei Restart ===
  sudo /etc/local.rc

Folgende Zeile am Ende einfügen:

  sudo -u www-data -i git --git-dir=/var/www/infoscreen/.git pull

=== Autostart in X11 ===

  sudo nano /etc/rc.local

Folgende Zeile ganz am Ende einfügen:

  su -l pi -c startx

=== Autostart Chromium Kiosk ===

  sudo nano /etc/xdg/lxsession/LXDE/autostart

xscreensaver und lxpanel entfernen. Folgende Zeilen ergänzen: 

  @xset s off
  @xset -dpms
  @xset s noblank
  @chromium --user-data-dir=/tmp --kiosk cosm.tiefpunkt.com/infoscreen/
  @xmodmap -e "pointer = 1 10 9 8 7 6 5 4 3 2"


[[Kategorie:Projekt]]
[[Kategorie:Hardware]]
