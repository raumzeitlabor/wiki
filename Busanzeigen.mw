{{ProjektInfoBox
|name        = Busanzeigen
|status      = experimental
|image       = IMG_0453.JPG
|description = 
|author      = [[Benutzer:Felicitus|Felicitus]] [[Benutzer:Nessi|Nessi]]
|version     = 0.1
}}

Die Busanzeigen wurden von Felicitus' Bruder zur Verfügung gestellt. Primär erstmal zum testen, wenn die FlipDot-Anzeige ansteuerbar ist, bekommen wir auch eine große FlipDot-Anzeige. Diese braucht nur Spannung zum Umschalten der Dots und eignet sich super zur Anzeige des Chats.

== Steckerbelegung vom Mainboard zum LCD ==

<pre>
Pin 1: +5V
Pin 2: +12V
Pin 3: GND
Pin 4: 6V
Pin 5: Takt (4ms)
Pin 6: ?? (meistens low) wird benötigt, ohne geht's nicht. Wird im betrieb vom controller auf low gezogen, ansonsten kommt da komischer analog-foo raus (auf <100mV niveau).
Pin 7: Data? kommt zeugs. kleinster Impuls bei 30µS
Pin 8: Data oder shift? Kleinster Impuls bei ca. 83µS
Pin 9: Data nochmal? 
Pin 10: Takt (Rückleitung)
Pin 11: +12V
Pin 12: GND
</pre>

Das Buspanel nimmt auch problemlos Daten vom rPI ohne Level Shifter an (3.3V Pegel).

== Protokoll ==
Wir hijacken die Daten zwischen dem Mainboard und den LCD-Multiplexern, da wir kein IBIS sprechen möchten. Das Mainboard in dem Panel generiert also nur noch die Versorgungsspannungen, der Rest wird vom Raspberry Pi erzeugt. Das LCD schluckt die 3.3V-Daten, ein Pegelwandler ist also nicht notwendig.

* Signale: [http://timohummel.com/temp/untitled.vcd] (Lesbar mit GTKWave)
* Daraus entstehendes Bild: [https://twitter.com/_felicitus/status/214992498085478400/photo/1]
* Auflösung: 152 * 16 (ca.)

* Pin 7 gibt den Datenübertragungstakt vor, Pin 9 die Daten. Wohl Flankengesteuert. Um einen Pixel zu setzen, muß der Pixelzustand auf Pin 9 sowohl bei High als auch Low auf Pin 7 gesetzt sein. Beispiel: Takt 1 Pin 7+9 high, Takt 2 Pin 7 low, Pin 9 high
* Für das setzen von Pixel muß Pin 8 auf High gezogen werden.
* Die Übertragungsgeschwindigkeit scheint nicht von relevanz zu sein

=== Pixelblöcke ===
Ein sogenannter Pixelblock kennzeichnet die Übertragung einer Reihe von Pixeln. Ein Pixelblock enthält genau 38 Pixel. Die Übertragung geschieht zeilenweise.

Beispiel:
** Spalte 1, Zeile 2
** Spalte 1, Zeile 4
** Spalte 1, Zeile 6
** Spalte 1, Zeile 8
** Spalte 1, Zeile 16
** Spalte 1, Zeile 14
** Spalte 1, Zeile 12
** Spalte 1, Zeile 10
** Spalte 2, Zeile 2
** Spalte 2, Zeile 4
** etc

Die Übertragung eines Pixelblockes wird eingeleitet, indem Pin 8 auf High gesetzt wird. Pin 7 gibt den Takt vor, Pin 9 die Daten. Die Daten, die bei fallender Flanke von Pin 7 auf Pin 9 angelegt sind, werden übernommen.

Insgesamt werden 2*32 Pixelblöcke übertragen.

== Doku ==

Die Doku liegt auf dem Datengrab bzw. abgeheftet in den Schnellheftern im oberen E-Eck-Regal.

* Die Hintergrundbeleuchtung schaltet erst dann aktiv, wenn 24V anliegen. (Damit könnte man was tricksen, um die Hintergrundbeleuchtung Situationsabhängig zu schalten).

==Zu Besorgen==
[x] Doku <br>
[ ] Netzteil

==ToDo==
[ ] Labeln <br>
[ ] Putzen <br>
[ ] Testen <br>
[ ] Interface Blackbox <-> Anzeige bauen<br>
[ ] Aufbauplatz finden<br><br>
Später:<br>
[ ] Hausbus <-> Anzeige bauen


==Bilder Flipdot==
{|
| [[Datei:IMG_0414.JPG|thumb|left]]
| [[Datei:IMG_0416.JPG|thumb|left]]
|}

==Bilder LCD Display==
{|
| [[Datei:LCD-innen.jpg|thumb|left]]
| [[Datei:IMG_0401.JPG|thumb|left]]
| [[Datei:IMG_0404.JPG|thumb|left]]
| [[Datei:IMG_0408.JPG|thumb|left]]
|-
| [[Datei:IMG_0407.JPG|thumb|left]]
| [[Datei:IMG_0400.JPG|thumb|left]]
| [[Datei:IMG_0405.JPG|thumb|left]]
| [[Datei:IMG_0406.JPG|thumb|left]]
|}

[[Kategorie:Projekt]]
