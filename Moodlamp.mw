{{ProjektInfoBox
|name        = Moodlamp
|status      = experimental
|image       = Moodlamp01.jpg
|description = Lecker-bunte Farblaterne
|author      = TabascoEye
|username    = 
|version     = 1.5
|update      = 
|platform    = 
|license     = 
|download    = [http://github.com/tiefpunkt/Moodlamp Firmware(Github)]
}}
Weil bunte, blinkende Lichter, die man steuern kann toll sind, wollen wir Moodlamps bauen.
Beim eh2010 in München gab es schon nette Moodlamps, die aber SMD Bauteile beinhalten und deshalb für Anfänger sehr schwer zu löten sind.
Wir wollten eine Moodlamp mit bedrahteten Bauteilen fertigen.
Die Erlanger haben sich das auch schon gedacht und sind damit soweit fertig, weshalb wir uns dieses Design klauen (danke Erlangen).

==Hardware==
===Bauteile===
{| border="1" cellspacing="0" cellpadding="10"
|-----
! Bezeichung || Bezugsquelle || Link || Preis 
|-----
|3 Watt RGB LED Modul || LED-Tech || http://www.led-tech.de/de/High-Power-LEDs-Edison/Edixeon-RGB/Edison-Edixeon-RGB-Star-LT-1470_142_147.html || 7,90€
|-----
|Kühlkörper Stern || LED-Tech || http://www.led-tech.de/de/High-Power-Zubehoer/Kuehlkoerper/Sternkuehlkoerper-51x51mm-LT-1461_106_114.html || 0,99€
|-----
|IR Modul TSOP  31238 || Farnell || http://de.farnell.com/vishay-semiconductor/tsop31238/ir-emitter-38khz/dp/1469635?Ntt=TSOP+31238
|| 1,14€
|-----
|RFM12 Modul (funk<->seriell) || CSD || http://www.csd-electronics.de/de/groups/g_273/items3443.htm || 3,95€
|-----
|Kleinteile (inkl. ISP wannenstecker, Hausbuswandler, Litze...) || Reichelt || http://www.reichelt.de/?ACTION=20;AWKID=292918;PROVID=2084  || 7,27€ 
|-----
| || || '''GESAMT''' || '''~23€'''
|-----
| Lampenngehäuse FADO || IKEA || http://www.ikea.com/de/de/catalog/products/80096372 || 9,99€
|}

Also für knapp über 30Euro eine selbstgebaute, voll steuerbare RGB Moodlamp \o/

Ich habe jetzt mal ausreichend Bauteile für 10 Bausätze bestellt und hoffe auf reges Interesse.
Vor allem möchte ich gerne einen Hausbus<->RFM12 Converter bauen/coden, der dann wireless die Moodlamps im Raum ansprechen kann.

hier: http://git.informatik.uni-erlangen.de/?p=hawo-moodlight/.git;a=blob;f=moodlight.brd;h=1e5b2dfb06c48103af19aaade9f18cce0dfacaa8;hb=HEAD gibts das Eagle layout für die Erlanger boards.
Und hier http://git.informatik.uni-erlangen.de/?p=hawo-moodlight/.git;a=blob;f=moodlight.sch;h=783581f14790a23bafa9855cb4fe9d82c3f8b828;hb=refs/heads/master den schaltplan.

===Lochraster Layout===


* hier das krude layout, um die bisherige version (pre-redesign) erstmal zu bauen.
{|
| [[Datei:Moodlamp-board.png|400px|thumb|Moodlampschaltung 1.0]]
| [[Datei:Moodlamp_bw.png|400px|thumb|Moodlampschaltung 1.0]]
|}
----

* Die Transistoren (BD139) mit dem metallischen Teil vom Atmel weg zeigend einbauen!
* Wer schon einen Bausatz hat: Die Widerstände sind falsch. Als Abhilfe genügt es zur Zeit, ROT und GRÜN mit den 10ohm Widerständen auszustatten, und BLAU mit dem 6,8ohm. Ich bestelle bei Reichelt nach, damit die korrekten Widerstände verbaut werden können. Tut mir Leid!
* Ich werd bei Zeiten das minimalisierte Layout von Severin in Lochmaster nachbauen und hier einpflegen.
* Wir wollen ein Geekend mit den Erlangern machen und weiter an der Moodlamp hacken (Re-design, RFM12 Ansteuerung, Projektideen...)

----

Hier das neue Kompaktlayout (Danke Tiefpunkt fürs Routen und DaFo für Lochmaster)
{|
| [[Datei:Moodlamp_1.5_top.png|400px|thumb|Moodlampschaltung 1.5 oben]]
| [[Datei:Moodlamp_1.5_bottom.png|400px|thumb|Moodlampschaltung 1.5 unten]]
|}

===Lessons learned===

* Klebende Wärmeleitpads benutzen (mitbestellen bei led-tech) statt Wärmeleitkleber. Sauerei und nervig bis zum Aushärten.
* Bauteile VOR der Bestellung nochmal sorgfältig verifizieren (IC Sockel, Verpolungsdiode, fehlende Widerstände)
* Schaltungen immer mal in Frage stellen. Wir werden die Schaltung re-designen...
* Einbaurichtung von Transistoren ordentlich dokumentieren
* LED Vorwiderstände in Frage stellen m(
* Unterschiede von Pinkompatiblen Atmels *soifz* ==> ATmega328p oder 168 will man nehmen (16 oder 32K statt 4)

==Firmware==
===Fuses===
 avrdude -c usbasp -p m48 -U lfuse:w:0xff:m -U hfuse:w:0xde:m
* Der Befehl setzt einen USBasp als Programmer vorraus
* Auf dem USBasp vor dem Setzen der Fuses den "Slow SCK"-Jumper (J3, der zwischen den beiden LEDs) setzen. Die anderen Jumper dürfen nicht gesetzt sein!

===Source===
Einfaches Farb-Fading sowie Steuerung per IR-Fernbdienung (Farbauswahl, zurück zum Fading-Modus). Passt gerade noch auf den Atmega48.
[http://github.com/tiefpunkt/Moodlamp http://github.com/tiefpunkt/Moodlamp]

===Mögliche Erweiterungen===
* Steuerung über RFM12-Chip --> Chip schon vorhanden, muss nur angesprochen werden!
* Steuerung über Audiosignal ?
* DMX? Hausbus?
* etc.

==Fotos==
{|
| [[Datei:2010-10-14 00.52.10.jpg|400px|thumb|Aufgebaute Moodlamp von tiefpunkt]]
| [[Datei:Moodlamp01.jpg|277px|thumb|Moodlamp in Betrieb, mit passender Fernbedienung]]
|}


[[Kategorie:Projekt]][[Kategorie: KleinProzessorZüchter]]
